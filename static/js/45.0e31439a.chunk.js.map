{"version":3,"file":"static/js/45.0e31439a.chunk.js","mappings":"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","sources":["component/Homepage.jsx","component/Tourdetailpage.jsx"],"sourcesContent":["import { React, useEffect, useState } from \"react\";\r\nimport { useNavigate, Link, useLocation } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { reset, logout } from \"../reducers/authSlice\";\r\nimport axios from \"axios\";\r\nimport Error from \"./Error\";\r\nimport \"./homepage.css\";\r\nimport Loading from \"./Loading\";\r\nimport Tourdetailpage from \"./Tourdetailpage\";\r\nconst Homepage = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const [state, setstate] = useState(false);\r\n  const tourdetail = JSON.parse(localStorage.getItem(\"tourdetail\"));\r\n  const navigate = useNavigate();\r\n  const { user, isError, isSuccess, message, isLoading } = useSelector(\r\n    (state) => state.auth\r\n  );\r\n\r\n  // const user = JSON.parse(localStorage.getItem('user'));\r\n\r\n  useEffect(() => {\r\n    const detail = location.pathname;\r\n    if (detail === \"/tourdetail\") {\r\n      setstate(true);\r\n      // Tourname = tourdetail.tour.name;\r\n    }\r\n    // if (detail === '/admin') {\r\n    //   Tourname = 'All Users';\r\n    // }\r\n    if (detail === \"/\") {\r\n      setstate(false);\r\n    }\r\n\r\n    if (isLoading) {\r\n      <Loading />;\r\n    }\r\n    if (isError) {\r\n      <Error />;\r\n    }\r\n    if (isSuccess) {\r\n      // if (user) navigate('/tours');\r\n      if (user) console.log(\"change here in homepage jsx\");\r\n      else navigate(\"/login\");\r\n    }\r\n    dispatch(reset());\r\n  }, [user, isLoading, isError, isSuccess, message, dispatch, navigate]);\r\n  const OnLogout = (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch(logout());\r\n\r\n    dispatch(reset());\r\n  };\r\n  const OnLogin = (e) => {\r\n    e.preventDefault();\r\n    navigate(\"/login\");\r\n  };\r\n  const Onregister = (e) => {\r\n    e.preventDefault();\r\n    navigate(\"/register\");\r\n  };\r\n  var Tourname = \"All Tours\";\r\n  const detail = location.pathname;\r\n  if (tourdetail) {\r\n    if (detail === \"/tourdetail\") {\r\n      Tourname = tourdetail.tour.name;\r\n    }\r\n  }\r\n\r\n  // if(detail === \"/\"){\r\n  //   Tourname = \"All Tours\"\r\n  // }\r\n  return (\r\n    <>\r\n      <div className=\"homepage_class\">\r\n        <nav nav_bar className=\"nav_container\">\r\n          <div className=\"left_nav\">\r\n            {!(state && tourdetail) ? <h2>All Tours</h2> : <h2>{Tourname}</h2>}\r\n          </div>{\" \"}\r\n          <div className=\"right_nav\">\r\n            <ul>\r\n              {\" \"}\r\n              {user ? (\r\n                <>\r\n                  <li>\r\n                    <button className=\"nav_logout_button\" onClick={OnLogout}>\r\n                      Logout{\" \"}\r\n                    </button>{\" \"}\r\n                  </li>\r\n                  <li>\r\n                    <Link to=\"/dashboard\">\r\n                      <img\r\n                        src={`./Abhishek-stark-reactapp/${user.photo}`}\r\n                        alt=\"dashboardLink\"\r\n                      />\r\n                    </Link>{\" \"}\r\n                  </li>{\" \"}\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <li>\r\n                    <button className=\"nav_login_button\" onClick={OnLogin}>\r\n                      Login{\" \"}\r\n                    </button>{\" \"}\r\n                  </li>{\" \"}\r\n                  <li>\r\n                    <button\r\n                      className=\"nav_register_button\"\r\n                      onClick={Onregister}\r\n                    >\r\n                      Register{\" \"}\r\n                    </button>{\" \"}\r\n                  </li>{\" \"}\r\n                </>\r\n              )}{\" \"}\r\n            </ul>{\" \"}\r\n          </div>{\" \"}\r\n        </nav>{\" \"}\r\n      </div>{\" \"}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n","import { React, useState, useEffect } from \"react\";\r\nimport { Navigate, useLocation, useNavigate } from \"react-router-dom\";\r\nimport \"./tourdetail.css\";\r\n// import GradeIcon from '@mui/icons-material/Grade';\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\n\r\nimport axios from \"axios\";\r\nimport Error from \"./Error\";\r\n// import { experimentalStyled } from '@mui/material';\r\n\r\nconst Tourdetailpage = () => {\r\n  const params = useLocation();\r\n  const navigate = useNavigate();\r\n  const tourdetail = JSON.parse(localStorage.getItem(\"tourdetail\"));\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  // console.log(details);\r\n  const [writeReview, setwriteReview] = useState(true);\r\n  const [reviewdata, setreviewdata] = useState({\r\n    review: \"\",\r\n    rating: \"\",\r\n  });\r\n\r\n  const { review, rating } = reviewdata;\r\n  var j = 1;\r\n\r\n  // tourdetail.tour[3].map((userid, index) => {\r\n  //   console.log(userid);\r\n  // });\r\n\r\n  const onchangereview = (e) => {\r\n    e.preventDefault();\r\n    setreviewdata((prevreview) => ({\r\n      ...prevreview,\r\n      [e.target.name]: e.target.value,\r\n      user: user.id,\r\n      tour: tourdetail.tour._id,\r\n    }));\r\n  };\r\n\r\n  const writeReviews = async (data) => {\r\n    let token = user.token;\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://127.0.0.1:8000/api/v1/reviews\",\r\n        data,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      // window.location.reload();\r\n      return response;\r\n    } catch (error) {\r\n      console.warn(error.message);\r\n    }\r\n  };\r\n  const onSubmitreview = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (reviewdata.review.match(/\\S/g) == null) {\r\n      return (\r\n        // window.alert('you not written any review..'),\r\n        setwriteReview(!writeReview)\r\n      );\r\n    } else {\r\n      writeReviews(reviewdata);\r\n      setreviewdata(!writeReview);\r\n      navigate(\"/\");\r\n    }\r\n  };\r\n  let i = 0;\r\n\r\n  const bookTour = async (tourId) => {\r\n    let token = user.token;\r\n\r\n    try {\r\n      const stripePromise = await loadStripe(\r\n        \"pk_test_51LhXM5SBrxf9grZuKlaBjNwd4LPft9O4c06bUKX8eBsgSBgcxaxMcm2jDFZZtTcRmVitjammnAkHhD19KLepU0ns00ZPAKOmmI\"\r\n      );\r\n      // 1) Get checkout session from API\r\n      const session = await axios.get(\r\n        `http://127.0.0.1:8000/api/v1/bookings/checkout-session/${tourId}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      const stripe = await stripePromise;\r\n      await stripe.redirectToCheckout({\r\n        sessionId: session.data.session.id,\r\n      });\r\n      return session;\r\n    } catch (err) {\r\n      <Error error={err.message} />;\r\n    }\r\n  };\r\n\r\n  const BookTours = (e) => {\r\n    e.preventDefault();\r\n\r\n    const Id = e.target.getAttribute(\"data-tourid\");\r\n    bookTour(Id);\r\n    console.log(Id);\r\n  };\r\n  if (user) {\r\n    return (\r\n      <>\r\n        <div className=\"detail_container\">\r\n          <div className=\"detail_cover\">\r\n            <span> {tourdetail.tour.name} </span>{\" \"}\r\n            <img\r\n              src={`./Abhishek-stark-reactapp/${tourdetail.tour.imageCover}`}\r\n              alt=\"\"\r\n              className=\"image_cover_class\"\r\n            />\r\n          </div>{\" \"}\r\n          <div className=\"tour_detail\">\r\n            <h1>About Tour</h1>\r\n            <div> {tourdetail.tour.description} </div>{\" \"}\r\n          </div>{\" \"}\r\n          <div className=\"tour_image_container\">\r\n            {tourdetail.tour.images.map((e, index) => {\r\n              i++;\r\n              return (\r\n                <img\r\n                  key={index}\r\n                  src={`./Abhishek-stark-reactapp/${e}`}\r\n                  alt=\"user_img\"\r\n                  className=\" tour_images \"\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          <div className=\"tour_btn_and_carddetail\">\r\n            {tourdetail.tour.guides.map((guidence, index) => {\r\n              return (\r\n                <div className=\"detail_card\" key={index}>\r\n                  <div key={index}>\r\n                    <div className=\"guide_image\">\r\n                      <img\r\n                        src={`./Abhishek-stark-reactapp/${guidence.photo}`}\r\n                        alt=\"GuidesImg\"\r\n                      />\r\n                    </div>\r\n                    <span style={{ color: \"yellow\" }}>{guidence.name}</span>\r\n                  </div>\r\n                  <div className=\"price\">Price:{guidence.price} </div>{\" \"}\r\n                  <span>{` Duration |${guidence.duration} days`}</span>\r\n                </div>\r\n              );\r\n            })}\r\n\r\n            <div className=\"book_tour_button\">\r\n              <div className=\"bok_btn_user_img\">\r\n                <img\r\n                  src={`./Abhishek-stark-reactapp/${user.photo}`}\r\n                  alt=\"user_img\"\r\n                />\r\n              </div>\r\n              <p>Book your Tour now and enjoy your Weekend ...</p>\r\n              <button\r\n                className=\"booktour_btn\"\r\n                data-tourid={tourdetail.tour.id}\r\n                onClick={BookTours}\r\n              >\r\n                Book Tour\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"reviews_border\">Reviews...</h3>\r\n          </div>\r\n          <footer className=\"reviews_and_reviewarea\">\r\n            {tourdetail.tour.reviews.map((e, i) => {\r\n              const { review, user } = e;\r\n              return (\r\n                <div className=\"review_card\" key={i}>\r\n                  <div className=\"review_img_cover\">\r\n                    <img\r\n                      src={`./Abhishek-stark-reactapp/${user.photo}`}\r\n                      alt=\"user_img\"\r\n                      className=\"review_user_img\"\r\n                    />\r\n                  </div>\r\n                  <h3>{user.name}</h3>\r\n                  <p>{review}</p>\r\n                  <span>AverageRating: {tourdetail.tour.ratingsAverage}</span>\r\n                  <div className=\"rating_star\">\r\n                    <h3>gradeIcon</h3>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n            <section className=\"footer_card\">\r\n              {writeReview ? (\r\n                <button\r\n                  id=\"add_review_btn\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    tourdetail.tour.reviews.map((value) => {\r\n                      if (value.user._id === user.id) {\r\n                        window.alert(\"you already written review\");\r\n                        console.log(\"under if\");\r\n                        setwriteReview(true);\r\n                      }\r\n\r\n                      if (value.user._id !== user.id) {\r\n                        setwriteReview(false);\r\n                        console.log(\"under else\");\r\n                        setreviewdata({\r\n                          review: \"\",\r\n                          rating: \"\",\r\n                        });\r\n                      }\r\n                    });\r\n                    // setwriteReview(false);\r\n                    // console.log('under else');\r\n                    // setreviewdata({\r\n                    //   review: '',\r\n                    //   rating: '',\r\n                    // });\r\n                    //\r\n                  }}\r\n                >\r\n                  Write Review\r\n                </button>\r\n              ) : null}\r\n              {!writeReview ? (\r\n                <form onSubmit={onSubmitreview}>\r\n                  <div>\r\n                    <textarea\r\n                      name=\"review\"\r\n                      id=\"review\"\r\n                      value={review}\r\n                      cols=\"30\"\r\n                      rows=\"10\"\r\n                      onChange={onchangereview}\r\n                    ></textarea>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"rating\"\r\n                      id=\"rating\"\r\n                      value={rating}\r\n                      onChange={onchangereview}\r\n                    ></input>\r\n                    <button type=\"submit\" id=\"review_submit_btn\">\r\n                      Submit\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              ) : null}\r\n            </section>\r\n          </footer>\r\n        </div>{\" \"}\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Tourdetailpage;\r\n"],"names":["dispatch","useDispatch","location","useLocation","useState","state","setstate","tourdetail","JSON","parse","localStorage","getItem","navigate","useNavigate","useSelector","auth","user","isError","isSuccess","message","isLoading","useEffect","detail","pathname","Loading","Error","console","log","reset","Tourname","tour","name","className","nav_bar","onClick","e","preventDefault","logout","to","src","photo","alt","writeReview","setwriteReview","review","rating","reviewdata","setreviewdata","onchangereview","prevreview","target","value","id","_id","writeReviews","data","token","axios","headers","Authorization","response","warn","bookTour","tourId","loadStripe","stripePromise","session","stripe","redirectToCheckout","sessionId","imageCover","description","images","map","index","guides","guidence","style","color","price","duration","Id","getAttribute","reviews","i","ratingsAverage","window","alert","onSubmit","match","cols","rows","onChange","type"],"sourceRoot":""}