"use strict";(self.webpackChunkmy_git_app=self.webpackChunkmy_git_app||[]).push([[656],{2693:function(e,r,t){t(2791);var n=t(184);r.Z=function(e){var r=e.error;return(0,n.jsx)("div",{children:(0,n.jsx)("h2",{children:r})})}},6656:function(e,r,t){t.r(r),t.d(r,{default:function(){return v}});var n=t(4165),a=t(5861),s=t(4942),i=t(1413),c=t(9439),o=t(2791),u=t(7689),l=t(3473),d=t(2388),h=t(2693),m=t(184),v=function(){var e=(0,u.s0)(),r=JSON.parse(localStorage.getItem("tourdetail")),t=JSON.parse(localStorage.getItem("user")),v=(0,o.useState)(!0),p=(0,c.Z)(v,2),g=p[0],x=p[1],j=(0,o.useState)({review:"",rating:""}),_=(0,c.Z)(j,2),f=_[0],w=_[1],k=f.review,b=f.rating,N=function(e){e.preventDefault(),w((function(n){var a;return(0,i.Z)((0,i.Z)({},n),{},(a={},(0,s.Z)(a,e.target.name,e.target.value),(0,s.Z)(a,"user",t.id),(0,s.Z)(a,"tour",r.tour._id),a))}))},Z=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,e.prev=1,e.next=4,d.Z.post("https://apifortour.onrender.com/api/v1/reviews",r,{headers:{Authorization:"Bearer ".concat(a)}});case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,s,i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,e.prev=1,e.next=4,(0,l.J)("pk_test_51LhXM5SBrxf9grZuKlaBjNwd4LPft9O4c06bUKX8eBsgSBgcxaxMcm2jDFZZtTcRmVitjammnAkHhD19KLepU0ns00ZPAKOmmI");case 4:return s=e.sent,e.next=7,d.Z.get("https://apifortour.onrender.com/api/v1/bookings/checkout-session/".concat(r),{headers:{Authorization:"Bearer ".concat(a)}});case 7:return i=e.sent,e.next=10,s;case 10:return c=e.sent,e.next=13,c.redirectToCheckout({sessionId:i.data.session.id});case 13:return e.abrupt("return",i);case 16:e.prev=16,e.t0=e.catch(1),h.Z,e.t0.message;case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(r){return e.apply(this,arguments)}}();if(t)return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"detail_container",children:[(0,m.jsxs)("div",{className:"detail_cover",children:[(0,m.jsxs)("span",{children:[" ",r.tour.name," "]})," ",(0,m.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(r.tour.imageCover),alt:"",className:"image_cover_class"})]})," ",(0,m.jsxs)("div",{className:"tour_detail",children:[(0,m.jsx)("h1",{children:"About Tour"}),(0,m.jsxs)("div",{children:[" ",r.tour.description," "]})," "]})," ",(0,m.jsx)("div",{className:"tour_image_container",children:r.tour.images.map((function(e,r){return(0,m.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(e),alt:"user_img",className:" tour_images "},r)}))}),(0,m.jsxs)("div",{className:"tour_btn_and_carddetail",children:[r.tour.guides.map((function(e,r){return(0,m.jsxs)("div",{className:"detail_card",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"guide_image",children:(0,m.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(e.photo),alt:"GuidesImg"})}),(0,m.jsx)("span",{style:{color:"yellow"},children:e.name})]},r),(0,m.jsxs)("div",{className:"price",children:["Price:",e.price," "]})," ",(0,m.jsx)("span",{children:" Duration |".concat(e.duration," days")})]},r)})),(0,m.jsxs)("div",{className:"book_tour_button",children:[(0,m.jsx)("div",{className:"bok_btn_user_img",children:(0,m.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(t.photo),alt:"user_img"})}),(0,m.jsx)("p",{children:"Book your Tour now and enjoy your Weekend ..."}),(0,m.jsx)("button",{className:"booktour_btn","data-tourid":r.tour.id,onClick:function(e){e.preventDefault();var r=e.target.getAttribute("data-tourid");y(r),console.log(r)},children:"Book Tour"})]})]}),(0,m.jsx)("div",{children:(0,m.jsx)("h3",{className:"reviews_border",children:"Reviews..."})}),(0,m.jsxs)("footer",{className:"reviews_and_reviewarea",children:[r.tour.reviews.map((function(e,t){var n=e.review,a=e.user;return(0,m.jsxs)("div",{className:"review_card",children:[(0,m.jsx)("div",{className:"review_img_cover",children:(0,m.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(a.photo),alt:"user_img",className:"review_user_img"})}),(0,m.jsx)("h3",{children:a.name}),(0,m.jsx)("p",{children:n}),(0,m.jsxs)("span",{children:["AverageRating: ",r.tour.ratingsAverage]}),(0,m.jsx)("div",{className:"rating_star",children:(0,m.jsx)("h3",{children:"gradeIcon"})})]},t)})),(0,m.jsxs)("section",{className:"footer_card",children:[g?(0,m.jsx)("button",{id:"add_review_btn",onClick:function(e){e.preventDefault(),r.tour.reviews.map((function(e){e.user._id===t.id&&(window.alert("you already written review"),console.log("under if"),x(!0)),e.user._id!==t.id&&(x(!1),console.log("under else"),w({review:"",rating:""}))}))},children:"Write Review"}):null,g?null:(0,m.jsx)("form",{onSubmit:function(r){if(r.preventDefault(),null==f.review.match(/\S/g))return x(!g);Z(f),w(!g),e("/")},children:(0,m.jsxs)("div",{children:[(0,m.jsx)("textarea",{name:"review",id:"review",value:k,cols:"30",rows:"10",onChange:N}),(0,m.jsx)("input",{type:"text",name:"rating",id:"rating",value:b,onChange:N}),(0,m.jsx)("button",{type:"submit",id:"review_submit_btn",children:"Submit"})]})})]})]})]})," "]})}}}]);
//# sourceMappingURL=656.309d48ca.chunk.js.map