"use strict";(self.webpackChunkmy_git_app=self.webpackChunkmy_git_app||[]).push([[928,656],{6656:function(e,r,t){t.r(r),t.d(r,{default:function(){return m}});var n=t(4165),a=t(5861),s=t(4942),i=t(1413),c=t(9439),o=t(2791),u=t(7689),d=t(3473),l=t(2388),h=t(2693),p=t(184),m=function(){(0,u.TH)();var e=(0,u.s0)(),r=JSON.parse(localStorage.getItem("tourdetail")),t=JSON.parse(localStorage.getItem("user")),m=(0,o.useState)(!0),v=(0,c.Z)(m,2),x=v[0],g=v[1],j=(0,o.useState)({review:"",rating:""}),f=(0,c.Z)(j,2),_=f[0],w=f[1],k=_.review,b=_.rating,N=function(e){e.preventDefault(),w((function(n){var a;return(0,i.Z)((0,i.Z)({},n),{},(a={},(0,s.Z)(a,e.target.name,e.target.value),(0,s.Z)(a,"user",t.id),(0,s.Z)(a,"tour",r.tour._id),a))}))},Z=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,e.prev=1,e.next=4,l.Z.post("http://127.0.0.1:8000/api/v1/reviews",r,{headers:{Authorization:"Bearer ".concat(a)}});case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,s,i,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,e.prev=1,e.next=4,(0,d.J)("pk_test_51LhXM5SBrxf9grZuKlaBjNwd4LPft9O4c06bUKX8eBsgSBgcxaxMcm2jDFZZtTcRmVitjammnAkHhD19KLepU0ns00ZPAKOmmI");case 4:return s=e.sent,e.next=7,l.Z.get("http://127.0.0.1:8000/api/v1/bookings/checkout-session/".concat(r),{headers:{Authorization:"Bearer ".concat(a)}});case 7:return i=e.sent,e.next=10,s;case 10:return c=e.sent,e.next=13,c.redirectToCheckout({sessionId:i.data.session.id});case 13:return e.abrupt("return",i);case 16:e.prev=16,e.t0=e.catch(1),h.Z,e.t0.message;case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(r){return e.apply(this,arguments)}}();if(t)return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"detail_container",children:[(0,p.jsxs)("div",{className:"detail_cover",children:[(0,p.jsxs)("span",{children:[" ",r.tour.name," "]})," ",(0,p.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(r.tour.imageCover),alt:"",className:"image_cover_class"})]})," ",(0,p.jsxs)("div",{className:"tour_detail",children:[(0,p.jsx)("h1",{children:"About Tour"}),(0,p.jsxs)("div",{children:[" ",r.tour.description," "]})," "]})," ",(0,p.jsx)("div",{className:"tour_image_container",children:r.tour.images.map((function(e,r){return(0,p.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(e),alt:"user_img",className:" tour_images "},r)}))}),(0,p.jsxs)("div",{className:"tour_btn_and_carddetail",children:[r.tour.guides.map((function(e,r){return(0,p.jsxs)("div",{className:"detail_card",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"guide_image",children:(0,p.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(e.photo),alt:"GuidesImg"})}),(0,p.jsx)("span",{style:{color:"yellow"},children:e.name})]},r),(0,p.jsxs)("div",{className:"price",children:["Price:",e.price," "]})," ",(0,p.jsx)("span",{children:" Duration |".concat(e.duration," days")})]},r)})),(0,p.jsxs)("div",{className:"book_tour_button",children:[(0,p.jsx)("div",{className:"bok_btn_user_img",children:(0,p.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(t.photo),alt:"user_img"})}),(0,p.jsx)("p",{children:"Book your Tour now and enjoy your Weekend ..."}),(0,p.jsx)("button",{className:"booktour_btn","data-tourid":r.tour.id,onClick:function(e){e.preventDefault();var r=e.target.getAttribute("data-tourid");y(r),console.log(r)},children:"Book Tour"})]})]}),(0,p.jsx)("div",{children:(0,p.jsx)("h3",{className:"reviews_border",children:"Reviews..."})}),(0,p.jsxs)("footer",{className:"reviews_and_reviewarea",children:[r.tour.reviews.map((function(e,t){var n=e.review,a=e.user;return(0,p.jsxs)("div",{className:"review_card",children:[(0,p.jsx)("div",{className:"review_img_cover",children:(0,p.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(a.photo),alt:"user_img",className:"review_user_img"})}),(0,p.jsx)("h3",{children:a.name}),(0,p.jsx)("p",{children:n}),(0,p.jsxs)("span",{children:["AverageRating: ",r.tour.ratingsAverage]}),(0,p.jsx)("div",{className:"rating_star",children:(0,p.jsx)("h3",{children:"gradeIcon"})})]},t)})),(0,p.jsxs)("section",{className:"footer_card",children:[x?(0,p.jsx)("button",{id:"add_review_btn",onClick:function(e){e.preventDefault(),r.tour.reviews.map((function(e){e.user._id===t.id&&(window.alert("you already written review"),console.log("under if"),g(!0)),e.user._id!==t.id&&(g(!1),console.log("under else"),w({review:"",rating:""}))}))},children:"Write Review"}):null,x?null:(0,p.jsx)("form",{onSubmit:function(r){if(r.preventDefault(),null==_.review.match(/\S/g))return g(!x);Z(_),w(!x),e("/")},children:(0,p.jsxs)("div",{children:[(0,p.jsx)("textarea",{name:"review",id:"review",value:k,cols:"30",rows:"10",onChange:N}),(0,p.jsx)("input",{type:"text",name:"rating",id:"rating",value:b,onChange:N}),(0,p.jsx)("button",{type:"submit",id:"review_submit_btn",children:"Submit"})]})})]})]})]})," "]})}},7928:function(e,r,t){t.r(r),t.d(r,{default:function(){return h}});var n=t(4165),a=t(5861),s=t(9439),i=t(2791),c=t(7689),o=t(9434),u=t(2388),d=t(2693),l=(t(6656),t(184)),h=function(){(0,c.TH)();var e=(0,i.useState)(),r=(0,s.Z)(e,2),t=r[0],h=r[1],p=(0,c.s0)(),m=(0,o.v9)((function(e){return e.auth})).user,v=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.get("https://apifortour.onrender.com/");case 3:(r=e.sent).data&&h(r.data.tours),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d.Z;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if((0,i.useEffect)((function(){v()}),[]),t)return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"banner_container",children:[(0,l.jsxs)("div",{className:"banner",children:[t.map((function(e,r){return(0,l.jsxs)("div",{className:"wrapper",children:[(0,l.jsxs)("div",{className:"img_cover_and_name",children:[(0,l.jsx)("img",{src:"./Abhishek-stark-reactapp/".concat(e.imageCover),alt:e.name}),(0,l.jsxs)("h2",{children:[" ",e.name," "]})]}),(0,l.jsxs)("div",{className:"price_and_summary",children:[(0,l.jsxs)("span",{className:"price_class",children:["".concat(e.difficulty," ").concat(e.duration,"-day tour")," "]}),(0,l.jsxs)("p",{id:"summary_id",children:[" ",e.summary," "]})]})," ",(0,l.jsxs)("div",{id:"tour_detail_id",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:" Stopage "})," ",(0,l.jsxs)("h3",{children:[" ",e.maxGroupSize," - people "]})," "]})," ",(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:" Location "})," ",(0,l.jsxs)("h3",{children:[" ",Date.now()]})]})]})," ",(0,l.jsxs)("div",{className:"details",children:[(0,l.jsxs)("div",{id:"price_and_rating",children:[(0,l.jsxs)("span",{children:[" ",e.price,"Rs / per person"," "]}),(0,l.jsxs)("h3",{children:[e.ratingAverage,"rating"]})," "]})," ",(0,l.jsxs)("button",{onClick:function(){var r=(0,a.Z)((0,n.Z)().mark((function r(t){var a;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),r.prev=1,r.next=4,u.Z.get("https://apifortour.onrender.com/tour/".concat(e.slug));case 4:(a=r.sent)&&(m&&localStorage.setItem("tourdetail",JSON.stringify(a.data)),p("/tourdetail")),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),d.Z,r.t0.message;case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}(),children:["Details"," "]})," "]})," "]},r)}))," "]})," "]})})}}}]);
//# sourceMappingURL=928.00825fe5.chunk.js.map